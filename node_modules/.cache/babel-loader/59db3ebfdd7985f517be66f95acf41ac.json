{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport { useContext, useEffect } from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { ModalRootContext, useModalRegistry } from \"../ModalRoot/ModalRootContext\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { withAdaptivity, ViewHeight, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport ModalDismissButton from \"../ModalDismissButton/ModalDismissButton\";\nimport { multiRef } from \"../../lib/utils\";\nimport { ModalType } from \"../ModalRoot/types\";\n\nvar ModalPage = function ModalPage(props) {\n  var platform = usePlatform();\n\n  var _useContext = useContext(ModalRootContext),\n      updateModalHeight = _useContext.updateModalHeight;\n\n  var children = props.children,\n      header = props.header,\n      viewWidth = props.viewWidth,\n      viewHeight = props.viewHeight,\n      sizeX = props.sizeX,\n      hasMouse = props.hasMouse,\n      onClose = props.onClose,\n      settlingHeight = props.settlingHeight,\n      dynamicContentHeight = props.dynamicContentHeight,\n      getModalContentRef = props.getModalContentRef,\n      restProps = _objectWithoutProperties(props, [\"children\", \"header\", \"viewWidth\", \"viewHeight\", \"sizeX\", \"hasMouse\", \"onClose\", \"settlingHeight\", \"dynamicContentHeight\", \"getModalContentRef\"]);\n\n  useEffect(function () {\n    updateModalHeight();\n  }, [children]);\n  var isDesktop = viewWidth >= ViewWidth.SMALL_TABLET && (hasMouse || viewHeight >= ViewHeight.MEDIUM);\n  var canShowCloseBtn = viewWidth >= ViewWidth.SMALL_TABLET;\n  var modalContext = useContext(ModalRootContext);\n\n  var _useModalRegistry = useModalRegistry(props.id, ModalType.PAGE),\n      refs = _useModalRegistry.refs;\n\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(getClassName('ModalPage', platform), \"ModalPage--sizeX-\".concat(sizeX), {\n      'ModalPage--desktop': isDesktop\n    })\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__in-wrap\",\n    ref: refs.innerElement\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__in\"\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__header\",\n    ref: refs.headerElement\n  }, header), createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__content-wrap\"\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__content\",\n    ref: multiRef(refs.contentElement, getModalContentRef)\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"ModalPage__content-in\"\n  }, children))), canShowCloseBtn && createScopedElement(ModalDismissButton, {\n    onClick: onClose || modalContext.onClose\n  }))));\n};\n\nModalPage.defaultProps = {\n  settlingHeight: 75\n};\nexport default withAdaptivity(ModalPage, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true\n});","map":{"version":3,"sources":["../../../src/components/ModalPage/ModalPage.tsx"],"names":["ModalPage","platform","usePlatform","updateModalHeight","useContext","children","header","viewWidth","viewHeight","sizeX","hasMouse","onClose","settlingHeight","dynamicContentHeight","getModalContentRef","restProps","props","useEffect","isDesktop","ViewWidth","ViewHeight","canShowCloseBtn","modalContext","refs","useModalRegistry","ModalType","classNames","getClassName","innerElement","headerElement","multiRef","withAdaptivity"],"mappings":"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","sourcesContent":["import { FC, HTMLAttributes, ReactNode, useContext, useEffect } from 'react';\nimport { getClassName } from '../../helpers/getClassName';\nimport { classNames } from '../../lib/classNames';\nimport { ModalRootContext, useModalRegistry } from '../ModalRoot/ModalRootContext';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { withAdaptivity, AdaptivityProps, ViewHeight, ViewWidth } from '../../hoc/withAdaptivity';\nimport ModalDismissButton from '../ModalDismissButton/ModalDismissButton';\nimport { Ref } from '../../types';\nimport { multiRef } from '../../lib/utils';\nimport { ModalType } from '../ModalRoot/types';\n\nexport interface ModalPageProps extends HTMLAttributes<HTMLDivElement>, AdaptivityProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: ReactNode;\n  onClose?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: Ref<HTMLDivElement>;\n}\n\nconst ModalPage: FC<ModalPageProps> = (props: ModalPageProps) => {\n  const platform = usePlatform();\n  const { updateModalHeight } = useContext(ModalRootContext);\n  const {\n    children,\n    header,\n    viewWidth,\n    viewHeight,\n    sizeX,\n    hasMouse,\n    onClose,\n    settlingHeight,\n    dynamicContentHeight,\n    getModalContentRef,\n    ...restProps\n  } = props;\n\n  useEffect(() => {\n    updateModalHeight();\n  }, [children]);\n\n  const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET && (hasMouse || viewHeight >= ViewHeight.MEDIUM);\n  const canShowCloseBtn = viewWidth >= ViewWidth.SMALL_TABLET;\n\n  const modalContext = useContext(ModalRootContext);\n  const { refs } = useModalRegistry(props.id, ModalType.PAGE);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(getClassName('ModalPage', platform), `ModalPage--sizeX-${sizeX}`, {\n        'ModalPage--desktop': isDesktop,\n      })}\n    >\n      <div vkuiClass=\"ModalPage__in-wrap\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalPage__in\">\n          <div vkuiClass=\"ModalPage__header\" ref={refs.headerElement}>\n            {header}\n          </div>\n\n          <div vkuiClass=\"ModalPage__content-wrap\">\n            <div vkuiClass=\"ModalPage__content\" ref={multiRef<HTMLDivElement>(refs.contentElement, getModalContentRef)}>\n              <div vkuiClass=\"ModalPage__content-in\">\n                {children}\n              </div>\n            </div>\n          </div>\n          {canShowCloseBtn && <ModalDismissButton onClick={onClose || modalContext.onClose} />}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nModalPage.defaultProps = {\n  settlingHeight: 75,\n};\n\nexport default withAdaptivity(ModalPage, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true,\n});\n"]},"metadata":{},"sourceType":"module"}