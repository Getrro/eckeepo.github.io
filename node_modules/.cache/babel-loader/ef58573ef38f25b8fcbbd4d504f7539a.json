{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { Component } from 'react';\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { withDOM } from \"../../lib/dom\";\n\nvar PopoutRoot = /*#__PURE__*/function (_Component) {\n  _inherits(PopoutRoot, _Component);\n\n  var _super = _createSuper(PopoutRoot);\n\n  function PopoutRoot() {\n    _classCallCheck(this, PopoutRoot);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PopoutRoot, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.popout && !prevProps.popout) {\n        this.blurActiveElement();\n      }\n    }\n  }, {\n    key: \"blurActiveElement\",\n    value: function blurActiveElement() {\n      if (typeof this.window !== 'undefined' && this.document.activeElement) {\n        this.document.activeElement.blur();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          popout = _this$props.popout,\n          modal = _this$props.modal,\n          viewWidth = _this$props.viewWidth,\n          children = _this$props.children,\n          getRootRef = _this$props.getRootRef,\n          window = _this$props.window,\n          document = _this$props.document,\n          restProps = _objectWithoutProperties(_this$props, [\"popout\", \"modal\", \"viewWidth\", \"children\", \"getRootRef\", \"window\", \"document\"]);\n\n      var isDesktop = viewWidth >= ViewWidth.TABLET;\n      return createScopedElement(\"div\", _extends({}, restProps, {\n        vkuiClass: \"PopoutRoot\",\n        ref: getRootRef\n      }), children, createScopedElement(AppRootPortal, null, !!popout && createScopedElement(\"div\", {\n        vkuiClass: isDesktop ? 'PopoutRoot--absolute' : 'PopoutRoot__popout'\n      }, popout), !!modal && createScopedElement(\"div\", {\n        vkuiClass: \"PopoutRoot__modal\"\n      }, modal)));\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.props.document;\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.props.window;\n    }\n  }]);\n\n  return PopoutRoot;\n}(Component);\n\n_defineProperty(PopoutRoot, \"defaultProps\", {\n  popout: null\n});\n\nexport default withAdaptivity(withDOM(PopoutRoot), {\n  viewWidth: true\n});","map":{"version":3,"sources":["../../../src/components/PopoutRoot/PopoutRoot.tsx"],"names":["PopoutRoot","Component","popout","prevProps","modal","viewWidth","children","getRootRef","window","document","restProps","isDesktop","ViewWidth","withAdaptivity","withDOM"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAA,SAAA,QAAA,OAAA;AAEA,SAAA,cAAA,EAAA,SAAA,QAAA,0BAAA;AACA,SAAA,aAAA,QAAA,0BAAA;AACA,SAAA,OAAA,QAAA,eAAA;;IAOMA,U;;;;;;;;;;;;;uCAaeG,S,EAA4B;AAC7C,UAAI,KAAA,KAAA,CAAA,MAAA,IAAqB,CAACA,SAAS,CAAnC,MAAA,EAA4C;AAC1C,aAAA,iBAAA;AACD;AACF;;;wCAEmB;AAClB,UAAI,OAAO,KAAP,MAAA,KAAA,WAAA,IAAsC,KAAA,QAAA,CAA1C,aAAA,EAAuE;AACpE,aAAA,QAAA,CAAD,aAAC,CAAD,IAAC;AACF;AACF;;;6BAEQ;AAAA,UAAA,WAAA,GACoF,KADpF,KAAA;AAAA,UACCD,MADD,GAAA,WAAA,CAAA,MAAA;AAAA,UACSE,KADT,GAAA,WAAA,CAAA,KAAA;AAAA,UACgBC,SADhB,GAAA,WAAA,CAAA,SAAA;AAAA,UAC2BC,QAD3B,GAAA,WAAA,CAAA,QAAA;AAAA,UACqCC,UADrC,GAAA,WAAA,CAAA,UAAA;AAAA,UACiDC,MADjD,GAAA,WAAA,CAAA,MAAA;AAAA,UACyDC,QADzD,GAAA,WAAA,CAAA,QAAA;AAAA,UACsEC,SADtE,GAAA,wBAAA,CAAA,WAAA,EAAA,CAAA,QAAA,EAAA,OAAA,EAAA,WAAA,EAAA,UAAA,EAAA,YAAA,EAAA,QAAA,EAAA,UAAA,CAAA,CAAA;;AAEP,UAAMC,SAAS,GAAGN,SAAS,IAAIO,SAAS,CAAxC,MAAA;AAEA,aACE,mBAAA,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAA,SAAA,EAAA;AAEE,QAAA,SAAS,EAFX,YAAA;AAGE,QAAA,GAAG,EAAEL;AAHP,OAAA,CAAA,EAAA,QAAA,EAME,mBAAA,CAAA,aAAA,EAAA,IAAA,EACG,CAAC,CAAD,MAAA,IAAY,mBAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAEI,SAAS,GAAA,sBAAA,GAA4B;AAArD,OAAA,EADf,MACe,CADf,EAEG,CAAC,CAAD,KAAA,IAAW,mBAAA,CAAA,KAAA,EAAA;AAAK,QAAA,SAAS,EAAC;AAAf,OAAA,EATlB,KASkB,CAFd,CANF,CADF;AAaD;;;wBArCc;AACb,aAAO,KAAA,KAAA,CAAP,QAAA;AACD;;;wBAEY;AACX,aAAO,KAAA,KAAA,CAAP,MAAA;AACD;;;;EAXsBV,S;;gBAAnBD,U,kBAC4C;AAC9CE,EAAAA,MAAM,EAAE;AADsC,C;;AA4ClD,eAAeW,cAAc,CAACC,OAAO,CAAR,UAAQ,CAAR,EAAuC;AAClET,EAAAA,SAAS,EAAE;AADuD,CAAvC,CAA7B","sourcesContent":["import { Component, HTMLAttributes, ReactNode } from 'react';\nimport { HasPlatform, HasRootRef } from '../../types';\nimport { withAdaptivity, ViewWidth, AdaptivityProps } from '../../hoc/withAdaptivity';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport { DOMProps, withDOM } from '../../lib/dom';\n\nexport interface PopoutRootProps extends HTMLAttributes<HTMLDivElement>, HasPlatform, AdaptivityProps, HasRootRef<HTMLDivElement> {\n  popout?: ReactNode;\n  modal?: ReactNode;\n}\n\nclass PopoutRoot extends Component<PopoutRootProps & DOMProps> {\n  static defaultProps: Partial<PopoutRootProps> = {\n    popout: null,\n  };\n\n  get document() {\n    return this.props.document;\n  }\n\n  get window() {\n    return this.props.window;\n  }\n\n  componentDidUpdate(prevProps: PopoutRootProps) {\n    if (this.props.popout && !prevProps.popout) {\n      this.blurActiveElement();\n    }\n  }\n\n  blurActiveElement() {\n    if (typeof this.window !== 'undefined' && this.document.activeElement) {\n      (this.document.activeElement as HTMLElement).blur();\n    }\n  }\n\n  render() {\n    const { popout, modal, viewWidth, children, getRootRef, window, document, ...restProps } = this.props;\n    const isDesktop = viewWidth >= ViewWidth.TABLET;\n\n    return (\n      <div\n        {...restProps}\n        vkuiClass=\"PopoutRoot\"\n        ref={getRootRef}\n      >\n        {children}\n        <AppRootPortal>\n          {!!popout && <div vkuiClass={isDesktop ? 'PopoutRoot--absolute' : 'PopoutRoot__popout'}>{popout}</div>}\n          {!!modal && <div vkuiClass=\"PopoutRoot__modal\">{modal}</div>}\n        </AppRootPortal>\n      </div>\n    );\n  }\n}\n\nexport default withAdaptivity(withDOM<PopoutRootProps>(PopoutRoot), {\n  viewWidth: true,\n});\n"]},"metadata":{},"sourceType":"module"}